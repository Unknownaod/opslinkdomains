<!DOCTYPE html>
<html>
<head>
  <title>My Domains â€” OpsLink Domains</title>
  <style>
    body { background:#050810; color:white; font-family: Segoe UI; margin:0; }
    .container { max-width:1100px; margin:auto; padding:40px; }
    .domain-item {
      padding:16px; border-bottom:1px solid rgba(148,163,184,.3);
      display:flex; justify-content:space-between; align-items:center;
    }
    .renew-btn { background:#2563eb; border:none; padding:8px 14px; border-radius:10px; cursor:pointer; }
  </style>
</head>
<body>
<script src="/dashboard/navbar.js"></script>

<div class="container">
  <h1>My Domains</h1>
  <div id="domainList"></div>
</div>

<script>
if (!localStorage.getItem("token")) window.location = "/auth/login.html";

async function loadDomains() {
  const res = await fetch("/api/domains/list", {
    headers: { Authorization: localStorage.getItem("token") }
  });

  const data = await res.json();
  const box = document.getElementById("domainList");

  if (!data.domains?.length) {
    box.innerHTML = "<p style='opacity:0.6'>You have no purchased domains yet.</p>";
    return;
  }

  box.innerHTML = data.domains.map(d => `
    <div class="domain-item">
      ${d.domain}
      <div>
        <button class="renew-btn" onclick="manageDNS('${d.domain}')">Manage DNS</button>
        <button class="renew-btn" style="background:#444" onclick="renew('${d.domain}')">Renew</button>
      </div>
    </div>
  `).join("");
}

function manageDNS(domain) {
  localStorage.setItem("dnsDomain", domain);
  window.location = "/dashboard/dns.html";
}

function renew(domain) {
  alert("Renewals coming in Phase 7 ðŸš€");
}

loadDomains();
</script>

</body>
</html>
